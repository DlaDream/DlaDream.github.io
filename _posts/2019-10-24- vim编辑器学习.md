---
layout:     post
title:      vim
subtitle:   vim编辑器学习
date:       2019-10-14
author:     DlaDream
header-img: img/post-bg-vim.jpg
catalog: true
tags:
     - Linux 
---

## 启动与退出

**进入方式**

  由于`vim`是第三方软件，所以在使用之前要先下载安装`vim`，安装后在终端输入`vim`就可以进入。

其他的进入方式：

- vim filename：如果filename不存在就创建这个文件并进入；如果存在就打开，光标定位在第一行
- vim +  filename：和上面那条指令是一样的效果，唯一不同之处是进入文件后指向的是*文件的最后一个最后一列*
- vim +N filename：进入文件是进入的是第N行
- vim +/string filename：进入文件的第一个string所在的位置

在vim中存在三种模式，分别是：

1. 命令模式
2. 输入模式
3. 末行模式

在输入模式下按下`ESC`就可以退出输入模式，进入命令模式；在命令模式下按`a`就可以进入输入模式

**退出方式**

- :w：将编辑区的内容写入到缓冲区中，将新的内容替代原始的文件，即新的内容替代原文件中的内容，但是并不会退出vim
- :w>>file：将内容写入到file中
- :q：退出
- :wq：将上面两条指令合为一条执行
- :x：与`:wq`效果等价
- :q!：强制退出，不讲缓冲区中的信息写入到文件中

## 基本命令

**移动**

- j：向下方向键
- k：向上方向键
- h：向左方向键
- l：向右方向键
- 0：移动到本行行首
- $：移动到行尾部
- H：移动到窗口第一行
- M：移动到窗口中间位置
- L：移动到窗口最后一行
- -：向上移动一行
- +：向下移动一行
- n+：向下移动n行
- n-：向上移动n行
- Ctrl+f：向下翻页
- Ctrl+b：向上翻一页

> 这些指令都在命令模式下输入，但是不需要在前面输入`:`



**删除**

- x：删除光标所在字符
  **注意：`：x`是保存并退出vim**
- dd：删除所在的行
- ndd：删除光标开始的n行
- **:n,md**：删除n～m行，注意这个有`:`

> vim会将删除的行暂存在缓冲区中，可以使用p或者P进行粘贴

**复制与搬移指令**

- yy：复制光标所在行的信息到buff区
- nyy：复制光标所在后n行的信息到buff区
- **:n1,n2  m  n3**：n1～n2的信息搬移到n3后
- **:n1,n2 c n3**：复制n1～n2的信息到n3后
- p：贴于光标所在行之下
- P：贴于光标所在行之上
- v：字符标记
- V：行标记
- Ctrl V ：矩形标记
- d：删除标记区的元素
- y：复制标记区的元素

**查找命令**

- /string：向下寻找string
- ?string：向上寻找string
- n：重复上次寻找

**替换**

- **:s/string1/string2**：把光标改行第一个string1替换为string2
- **:s/string1/string2/g**：同上，不过是把改行所有的string1都替换掉
- **%/string1/string2/g**：同上，不过是全文内容替换
- **:n1,n2 s/string1/string2/g**：把n1～n2的替换
- rx：替换光标所在位置的字符
- R：替换光标所在位置的字符，并依次将输入的替换掉光标后面的，知道按下ESC退出

**其他指令**

- .：重复上次操作
- u：撤销上次操作
- U：撤销对改行做出的所有修改
- **:line n**调到第n行
- **:set number**：设置行号或者`set nu`
- :set nonu：不显示行号
- **:!command**：执行command
- wq!：强制存盘后退出
- Ctrl z：暂时退出vim，进入shell中
- fg：在shell中执行fg进入vim中，与上面那个配合使用

## 编辑多个文件

  当使用vim的时候可以给出多个文件名，这时每当结束一个文件的时候会继续编辑下一个文件而不用重新启动vim，要想跳转到下一个文件输入`:n`命令，若当前文件已经被修改则会报错

- `:n`：调到下一个文件
- `:n!`：强制跳到下一个文件，不保存对当前文件的修改
- `:n filename`：调到指定文件名的文件

可以使用`:ar`可以查看文件名列表

**其他的一些操作**

- :e filename：编辑另外一个文件
- :r filename：将filename中的内容插入到缓冲区中当前光标所在位置的后面，指定文件成为该文件的一部分

