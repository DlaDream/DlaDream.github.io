---

layout:     post
title:      "Linux Learning -shell command"
subtitle:   " \"享受生活，而不是被生活享受\""
date:       2019-09-19 21:00
author:     "Yifeng"
header-img: "img/linux-shell.jpg"
tags:
      - Linux

---

## Linux  基本命令学习

> 这是我Linux课程学习时做的笔记，涉及内容有限，日后学习时会更新。



**Content**：

* [登录Linux系统](#%E7%99%BB%E5%BD%95linux%E7%B3%BB%E7%BB%9F)
* [退出Linux系统](#%E9%80%80%E5%87%BAlinux%E7%B3%BB%E7%BB%9F)
* [who指令](#who%E6%8C%87%E4%BB%A4)
* [cat、more、less指令](#catmoreless%E6%8C%87%E4%BB%A4)
* [ls 指令](#ls-%E6%8C%87%E4%BB%A4)
* [cp、mv命令](#cpmv%E5%91%BD%E4%BB%A4)
* [rm 指令](#rm-%E6%8C%87%E4%BB%A4)
* [pwd 指令](#pwd-%E6%8C%87%E4%BB%A4)
* [cd 指令](#cd-%E6%8C%87%E4%BB%A4)
* [mkdir 、rmdir 指令](#mkdir-rmdir-%E6%8C%87%E4%BB%A4)
* [ln 指令](#ln-%E6%8C%87%E4%BB%A4)
* [find、grep 指令](#findgrep-%E6%8C%87%E4%BB%A4)



### 登录Linux系统

​    Linux系统有两种账户：一般用户、超级用户；这两种不同的用户有不同的权限，可以根据命令提示符进行判断是那种用户。

- 超级用户：`$`
- 一般用户：`#`

> 在Ubuntu中可以使用 `sudo  su`进入超级用户状态，使用`su  name`可以进入一般用户name状态

​    如果需要修改密码，可以使用`passwd`指令进行修改密码；其中超级用户可以修改任何人的密码，使用方式是：处于超级用户状态下，使用指令`passwd name`就可以修改name的密码。



### 退出Linux系统

   可以使用`exit` 指令或者`Ctrl+D`退出Linux系统；此外还有一些常用的指令如下：

- reboot：重启
- shutdown now：立刻关机
- shutdown time：过time时间后关机
- halt -t：立刻关机



> 使用关闭系统的指令主要是为了防止缓冲区中的数据没有写入磁盘，从而导致数据丢失的问题。



### who指令

​    who指令用于显示有哪些使用者正在使用此台“电脑”，默认状态可以显示以下信息：

- 登录用户名
- 使用的终端设备
- 登录到系统的时间



### cat、more、less指令

   这三个指令都是用来在终端中查看文件，但是每个指令各有特色。

**cat**

​    语法：`cat [-option] filename`,其中`option`常用的有以下几种：

- -n：输出内容的同时，给每行加上行号
- -b：作用和`-n`一样，但是不给空行加行号
- -s：在内容中存在两行或者两行以上的空行的时候，压缩空行到一行

> 此外`cat`指令还可以用来创建一个文件，并向文件中写入内容，这需要配合输入重定向符号`>`来实现，演示如下：

![cat指令演示](https://i.loli.net/2019/09/19/X4zWNAERadMGfnI.png)

其中`cat > test.txt`将终端输入的内容重定向到test.txt文件中，在输入过程中用`Ctrl+D`来结束输入

基于上面的方法，`cat`指令也可以用来将多个文件合并为一个文件：

`cat file1  file2  file3 > file4`

但是如果你向将file1和file2的内容合并，这时候上面的方法就不适用了，但是可以使用追加重定向符号`>>`来实现：

使用`cat test2.txt >> test.txt`将test2.txt的内容追加到test.txt中

![追加重定向](https://i.loli.net/2019/09/19/o9r2JbPvuDA6SB5.png)



**more**

   more指令一次显示一屏的信息，回车可以换一行，空格可以换一页；语法格式`more [-option]   filename`,主要的`option`有下面几个：

- -d：提示用户，在终端下方会显示*[Press space to continue, q to quit]*
- -f：计算实际的行数（有些行由于太长，一行无法显示而被分为两行或者两行以上）
- -s：压缩空行，遇到两行或者两行以上的空行，会压缩至一行
- +/：在文件中搜索这个字符，然后从这个字符开始显示
- +num：从第num行开始显示



**less**

​    less和more相比较，增加了前翻的功能；语法是`less [-option]  filename`

有趣的是`less`提供了比`more`更多的功能，列举如下：

- `less`支持光标前后翻动
- 可以用行号或者百分比作为书签来浏览文件
- 可以使用-M看到更多关于文档的信息，比如：行数、当前所处的行数等
  ![](https://i.loli.net/2019/09/19/bGe4mpui3QlOxYh.png)
- 可以使用！运行其他的程序，比如使用`wc`进行字数统计：
  在终端输入：`！ wc  .bashrc`后效果如下：
  ![](https://i.loli.net/2019/09/19/bH9nujpYfATgV7w.png)
  显示完成操作，等待按下回车键，重新回到原来的less查看文档界面
- /用来查找一个单词或者其他的内容，搜索到的目标会高亮

> ！的普遍意义是运行
>
> /   的普遍意义是搜索



### ls 指令

​    ls指令是十分常用的一个指令，用于查看文件或者目录信息；语法：`ls  [-option]  name`;其中常用的`option`主要有一下几种：

- -a：显示所有的文件，包括隐藏文件
- -l：显示文件的详细信息，包括：权限、大小、所属的组、修改日期等
- -R：递归显示子文档，比如：`ls  -R  /usr/bin` 则会显示bin内的所有内容，假如bin中有一个文件夹名字为test，则test文件夹中的内容也会递归显示
- -S：将搜索结果按照从大到小的顺序排序
- -h：以K、M、G等人类易于看懂的为单位
- -r：颠倒搜索结果的显示顺序，配合`-S`使用可以实现从小到达排序输出
- -d：文件夹以文件夹的形式展示，而不递归显示
- -F：显示出文件的类型

> Ubuntu中使用`ls`指令的时候会默认加上`-color`参数，从而让不同类型的文件展示出不同的颜色；



列出有限个子文件夹的方法：-R参数配合-d参数使用；比如下面的命令可以练出第三层子目录中的所有内容：
`ls -dR   /*/*/*`

> ps:其实我觉的可以不适用-R参数，只是用-d参数就可以了



### cp、mv命令

   cp命令的作用的复制一个文件，原文件仍然存在；mv的作用是移动文件，原文件不在存在。

 **cp**

   cp命令的语法格式：`cp  [-option]  原文件  目标文件`；其中`option`常用的有一下几种：

- -b：例如使用`cp    file1    file2`的时候，如果file2本来就存在，那么是会覆盖掉file2中的内容；但是如果加上了-b参数，就会生成一个备份文件，名为file～
- -i：出现覆盖的时候会在终端进行询问
- -r：对目录复制的时候需要使用这个参数，递归操作

**注意**：cp指令的作用于目录时的两种不同的情况，比如：`cp file1  file2`，如果目录file2已经存在，那么cp指令会将file1及其内部的文件全部复制到file2目录下；如果file2目录不存在，那么会创建一个目录file2，并把file1内部的文件复制过去，此时file2内部已经没有名为file1的文件夹

![](https://i.loli.net/2019/09/19/UH9ManGsZBuyQkJ.png)

​     由于test1文件夹不存在，所以`cp -r test test1`时，先创建test1，并只将test内部的文件夹test2移动到test1中，此时test1文件夹中没有名为test的文件夹了

![](https://i.loli.net/2019/09/19/DJIRM1hGHibq3Vk.png)

​     test3文件夹在`cp -r   test   test3`指令执行时已经存在，所以cp指令将test文件夹及其内部的文件全部复制到test3目录下。

> mv对目录操作时也存在目标目录存在和不存在两种情况，而且和cp指令的处理方式相同



**mv**

   mv指令将文件移动位置，也可以用来更改文件的名称；常用`option`如下：

- -b：在移动时如果目标文件存在，则对目标文件做备份
- -v：在移动的时候作解释
- -f：如果目标文件存在就删除目标文件，不问使用者是否要移动

> mv指令中没有-r参数哦 :)

![](https://i.loli.net/2019/09/19/LFqlrtTIJevZgQf.png)

​     比如我们将test移动到test1下时，由于test1下原来就存在名为test的文件，所以对test文件做了备份：test～



### rm 指令

   rm指令用于删除文件，在使用时要非常小心，因为误删一个文件可能导致你的系统崩溃。

其中常用的`option`有下面几个：

- -f：强制性删除，不在终端询问是否要删除
- -r：递归删除，删除文件及其内部文件，如果要删除一个目录的时候必须使用这个参数
- -i：终端交互，询问是否要删除某个文件



### pwd 指令

   pwd用于显示当前用户所处的目录名称



#### cd 指令

   进入文件目录；通常有几个通配符

- .：表示当前目录
- ..：表示上层目录
- ～：表示某个用户的默认目录，即：/name/home
  `cd ~` 和`cd`等价



### mkdir 、rmdir 指令

   mkdir指令用于创建目录；rmdir指令用于删除目录。

**mkdir**

​     mkdir一次可以创建一个或者多个目录；只要使用的参数如下：

- p：建立目录时若父目录不存在，则可以与子目录一起创建。比如：`mkdir   -p  test/test1/test2`;如果当前目录中不存在test目录，加上`-p`参数后会先创建test，后在test内创建test1，递归创建，形成目录的继承结构，但是如果不加上`-p`参数，此时系统会报错

![](https://i.loli.net/2019/09/20/F8CS2MeQkXvuf5h.png)

**rmdir**

​     rmdir指令用来删除目录，但是他要求目录内部必须为空，否则将无法删除；它常用的参数也是`-p`

- p：删除字母时一直向上递归删除其父目录，直到父目录不只有一个子目录时停止。

   ![](https://i.loli.net/2019/09/20/T1OWrIKaDJLgqUX.png)

​    从图片中可以看到，由于test目录下有两个子目录，所以在使用`rmdir -p test/test1/test2/test3`时一直向上递归删除，但是当递归删除test时发现test不为空目录（删除test1目录后仍然有test4）所以删除停止。

> rmdir删除目录的时候必须指定子目录的完整结构，而且子目录必须为空

 

### ln 指令

   ln指令的作用是创建链接，其中包括硬链接和软链接两种形式。

**硬链接**

​     ln后不加任何参数的时候默认是创建硬链接，其实硬链接可以理解为将文件copy一份产生一个副本，但是副本和原本之间内容保持同步，也就是说任何一个内容修改都会同步到另外一个文件中，但是删除其中一个文件，另外一个文件仍然存在。

**软链接**

   `ln -s ` 可以产生软链接，软链接可以理解为快捷方式，它本身不占内存（除了快捷方式本身占得内存，里面没有存储真正的内容），因为是快捷方式，所以如果原文件被删除后，快捷方式也就失效；对快捷方式做出的修改会同步到原文件中，相当于制定了一个别名，通过这个别名可以访问原文件。

![](https://i.loli.net/2019/09/20/Px1GXCeTcbalMUH.png)

   我们创建了一个文件file，创建了一个硬链接file2，一个软链接file3，然后显示后发现file3的大小是4，而file和file2的大小相同，都是0（因为里面没有内容）

  ![](https://i.loli.net/2019/09/20/2zAYCoSXsydTkPJ.png)

​    我们对软链接的修改会同步到原文件中，同时对原文件的修改也会同步到硬链接产生的文件中，而且硬链接和原文件的大小总是保持一致

硬链接和软链接的区别：

- 硬链接必须在同一文件系统中创建（即原文件所在目录或者原文件所在目录的子目录中）；而软链接没有这个要求
- 硬链接大小总是和原文件保持一致；而软链接没有
- 硬链接不可以建立指向目录文件的链接；而软链接可以建立一个指向目录的链接

### find、grep 指令

​     find指令可以查找文件和目录，grep主要是配合正则表达式搜索文件内容。

**find**

​     find 查找对象   [-option]，其中常用的option有下面几种：

- -name：按照名字查找
- -type：查找某个类型的对象
- -mtime：查找m天以前被修改过的文件，配合+（表示大于）和-（表示小于）可以实现查找多少天内没被修改过的或者多少天内被修改过的文件。
  比如：`find  -mtime +3`   查找当前目录下，三天内没有被修改过的文件
               `find   -mtimr -3` 查找当前目录下，三天内刚被修改过的文件
- -atime：查找n天前被访问过的文件
- -exec cmd：执行cmd指令，命令要以"\\"结尾
- -size：按照文件大小查找
- -print：在显示查找结果的时候把查找的到的文件的路径也打印出来

eg：

- 查找/usr/bin下最近100天没有访问过的项目：`find   /usr/bin  -atime +100`
- 查找/usr/bin下24小时内修改过的文件：`find  /usr/bin  -mtime -1`



**grep**

​     在文件中查找字符串，可以配合正则表达式使用

常用的正则表达式：

- *：表示前面的字符出现0次或者多次
- .：表示一个除"\n"之外的字符
- ？：和"."表示的效果一样
- {x}：前导字符出现x次
- {x,y}：前导字符出现x～y次
- {x,}：前导字符至少出现x次
- {,y}：前导字符最多出现y次
- (xxx)：字符串xxx
- [a-z]或[xyz]：在[]范围内的某个字符
- [XYZ]+：表示[]内的某个字符至少出现一次
- \x：？或者\字符等，比如匹配？需要使用"\?",匹配\需要使用"\\\\"
- ^：匹配每行的开头字符，如果匹配a开头的行应该为"^a"
- $：匹配每行的结束字符，如果匹配a结束的行应该为"a$"；**注意^和$的位置**

> 还有很多正则表达式的规则，因为我还没有学到，所以就不在这里列出，如果后期我有时间学习会更新

**注意**：我在第一次使用`grep`指令配合正则表达式时，发现想匹配某个字符出现n次的时候（就是使用{x}进行匹配），无论怎么使用都不可以，甚至我的老师也不知道原因，都来我在网上查询之后才发现，**在shell中"{"和"}"都有特殊的含义，所以我们需要使用转义符"\\"进行转义。

![](https://i.loli.net/2019/09/20/2GMy5zpZmJ6ExfS.png)

​         从这个例子中我们可以看到，在没使用转义字符时，匹配3-7个相同的小写字母时没有显示任何结果，但是在使用转义字符时才可以匹配到正确的结果。





